/*! SlotMachine - v2.0.2 - 2014-07-31
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
!function(a,b,c,d){function e(c,e){function f(b){for(var c=0,d=0;b>d;d++)c+=a(B.get(d)).outerHeight();return-c+v}function i(){return Math.abs(Math.round(parseInt(u.css("margin-top").replace(/px/,""),10)/B.first().height()))-1}function j(a){var b,c=a||!1;do b=Math.floor(Math.random()*B.length);while(c&&b===G.index&&b>=0);return{index:b,el:B.get(b)}}function k(a){if("number"==typeof a){var b=function(){return a};z.settings.randomize=b}else z.settings.randomize=a}function l(){var a;if(null!==z.settings.randomize&&"function"==typeof z.settings.randomize){var b=z.settings.randomize(G.index);(0>b||b>=B.length)&&(b=0),a={index:b,el:B.get(b)}}else a=j();return a}function m(){var a=G.index-1<0?B.length-1:G.index-1;return{index:a,el:B.get(a)}}function n(){var a=G.index+1<B.length?G.index+1:0;return{index:a,el:B.get(a)}}function o(a,b){switch(B.removeClass("slotMachineBlurFast slotMachineBlurMedium slotMachineBlurSlow"),a){case"fast":B.addClass("slotMachineBlurFast");break;case"medium":B.addClass("slotMachineBlurMedium");break;case"slow":B.addClass("slotMachineBlurSlow")}b!==!0||"stop"===a?A.add(B).removeClass("slotMachineGradient"):A.add(B).addClass("slotMachineGradient")}function p(){u.css("margin-top",f(G.index))}function q(a){if(!s())return o("stop"),p(),void setTimeout(function(){r()},z.settings.delay);F=!0;var b=z.settings.delay;if("number"!=typeof a)o("fast",!0),b/=2,u.animate({marginTop:w},b,"linear",function(){D===!1&&(u.css("margin-top",0),q())});else if("number"==typeof a&&a>0){switch(a){case 1:case 2:o("slow",!0);break;case 3:case 4:o("medium",!0),b/=1.5;break;default:o("fast",!0),b/=2}u.animate({marginTop:w},b,"linear",function(){D===!1&&(u.css("margin-top",0),q(a-1))})}else r()}function r(a){if(u.clearQueue().stop(!0,!1),o("slow",!0),F=!0,!s())return"function"==typeof E&&E(!1,!1),o("stop",!1),p(),void(F=!1);var b=j();"function"==typeof a?b=a():null!==z.settings.randomize&&"function"==typeof z.settings.randomize?b=l():z.settings.auto&&(b=n()),G.index=i(),G.el=B.get(G.index);var c=f(b.index),d=3*z.settings.delay;b.index>G.index?0===G.index&&b.index===B.length-1&&u.css("margin-top",f(B.length)):G.index===B.length-1&&0===b.index&&u.css("margin-top",0),G=b,u.animate({marginTop:c},d,"easeOutBounce",function(){o("stop"),F=!1,"function"==typeof E&&(E(A,G),E=null)}),setTimeout(function(){o("false",!1)},d/2)}function s(){if(z.settings.stopHidden===!1)return!1;var c=A.offset().top>a(b).scrollTop()+a(b).height(),d=a(b).scrollTop()>A.height()+A.offset().top;return!c&&!d}function t(){D===!1&&(C=setTimeout(function(){E=t,D=!1,q(5)},z.settings.auto))}this.element=c,this.settings=a.extend({},h,e),this._defaults=h,this._name=g;var u,v,w,x,y,z=this,A=a(c),B=A.children(),C=null,D=!1,E=null,F=!1,G={index:this.settings.active,el:B.get(this.settings.active)};return A.css("overflow","hidden"),B.wrapAll("<div class='slotMachineContainer' />"),u=A.find(".slotMachineContainer"),w=-u.height(),x=B.last().clone(),y=B.first().clone(),u.prepend(x),u.append(y),v=-x.outerHeight(),u.css("margin-top",f(z.settings.active)),z.settings.auto!==!1&&(z.settings.auto===!0?q():t()),{auto:t,shuffle:function(a,b){D=!1,E=b,q("number"==typeof a?a:a!==d?5:d)},stop:function(a){z.settings.auto!==!1&&null!==C&&clearTimeout(C),"number"==typeof a&&a>0?(u.clearQueue().stop(!0,!1),D=!1,q(a)):(D=!0,r())},prev:function(){r(m)},next:function(){r(n)},active:function(){return G},isRunning:function(){return F},setRandomize:k}}function f(b,c){var d;return a.data(b,"plugin_"+g)?d=a.data(b,"plugin_"+g):(d=new e(b,c),a.data(b,"plugin_"+g,d)),d}var g="slotMachine",h={active:0,delay:200,auto:!1,randomize:null,stopHidden:!0};a(c).ready(function(){a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>'),a("mask#slotMachineFadeSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>'),a("body").append("<style>.slotMachineBlurFast{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='5')}.slotMachineBlurMedium{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='3')}.slotMachineBlurSlow{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1')}.slotMachineGradient{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")}),"function"!=typeof a.easing.easeOutBounce&&a.extend(a.easing,{easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}}),a.fn[g]=function(b){return 1===this.length?f(this,b):this.each(function(){a.data(this,"plugin_"+g)||f(this,b)})}}(jQuery,window,document);